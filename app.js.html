<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: app.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: app.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Initialize Firebase
var firebaseConfig = {
    apiKey: "AIzaSyAaAx6HT1qq_mZIZLggvj8EzL5ctI0mQfA",
    authDomain: "pageone-c741e.firebaseapp.com",
    projectId: "pageone-c741e",
    storageBucket: "pageone-c741e.appspot.com",
    messagingSenderId: "752294608481",
    appId: "1:752294608481:web:2bad0f544ed9d91584b420",
    databaseURL: "https://pageone-c741e-default-rtdb.firebaseio.com/",
};
firebase.initializeApp(firebaseConfig);

// Get elements
const loginForm = document.getElementById('loginform');
const signupForm = document.getElementById('signupform');

// Add login event
loginForm.addEventListener('submit', (e) => {
    e.preventDefault();

    // Get username and password
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    // Sign in
    firebase.auth().signInWithEmailAndPassword(username, password).then((e) => {
        // if correct credentials, goes to main page
        console.log('Successfully signed in');
        window.location.href = "index.html";
    })
    .catch((e) => {
        // output error message 
        const output = document.querySelectorAll('.error')[0];
        output.textContent = e.message;
        console.log(e.message);
    })
    ;

    loginForm.reset();
});

// Add signup event
signupForm.addEventListener('submit', (e) => {
    e.preventDefault();

    // Get username and password
    const username = document.getElementById('username2').value;
    const password = document.getElementById('password2').value;
    const nameUser = document.getElementById('nameUser').value;

    // Create account
    firebase.auth().createUserWithEmailAndPassword(username, password).then((e) => {
        // if account succesfully created, goes to confirm page
        console.log('Account successfully created');
        e.user.updateProfile({ displayName: nameUser });
        writeUserData(firebase.auth().currentUser.uid, nameUser, username);
        document.getElementById("page3").style.display = "block";
    })
    .catch((e) => {
        // output error message 
        const output = document.querySelectorAll('.error')[1];
        output.textContent = e.message;
        console.log(e.message);
    });

    signupForm.reset();
});

// Add a realtime listener
firebase.auth().onAuthStateChanged(firebaseUser => {
    if (firebaseUser) {
        console.log(firebaseUser);
    } else {
        console.log('Not logged in');
    }
});

/** 
 * Writes a new user to the database.
 * 
 * @param {string} userId - Unique ID of user.
 * @param {string} name - Name of the user.
 * @param {string} email - Email of the user.
 */
function writeUserData(userId, name, email) {
    firebase.database().ref('users/' + userId).set({
      username: name,
      email: email,
    });
  }

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#createNoteObject">createNoteObject</a></li><li><a href="global.html#eventInput">eventInput</a></li><li><a href="global.html#handleNoteButtonClick">handleNoteButtonClick</a></li><li><a href="global.html#moveLogin">moveLogin</a></li><li><a href="global.html#moveSignup">moveSignup</a></li><li><a href="global.html#updateReminders">updateReminders</a></li><li><a href="global.html#writeUserData">writeUserData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jun 10 2021 22:44:47 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
